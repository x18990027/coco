<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正在加载中...</title>
    <style>
        /* 加载状态样式 */
        #loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            color: #333;
        }
        
        /* 错误提示样式 */
        #error {
            display: none;
            padding: 20px;
            background-color: #ffebee;
            color: #b71c1c;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <!-- 加载状态 -->
    <div id="loader">正在加载中...</div>
    
    <!-- 错误提示 -->
    <div id="error"></div>
    
    <!-- 内容容器 -->
    <div id="content" style="display: none;"></div>

    <script>
        // 获取URL中的参数
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // 获取并渲染远程HTML
        async function loadRemoteHtml() {
            const urlParam = getUrlParameter('url');
            const loader = document.getElementById('loader');
            const errorContainer = document.getElementById('error');
            const contentContainer = document.getElementById('content');

            if (!urlParam) {
                loader.style.display = 'none';
                errorContainer.style.display = 'block';
                errorContainer.textContent = '错误：未提供url参数';
                return;
            }

            try {
                // 构建请求URL
                const requestUrl = `https://ylmcat.com/${urlParam}`;
                
                // 发送请求
                const response = await fetch(requestUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP错误! 状态码: ${response.status}`);
                }
                
                // 获取HTML内容
                const htmlContent = await response.text();
                
                // 隐藏加载状态，显示内容
                loader.style.display = 'none';
                contentContainer.style.display = 'block';
                
                // 渲染HTML内容
                contentContainer.innerHTML = htmlContent;
                
                // 执行加载的HTML中的脚本
                executeScripts(contentContainer);
                
            } catch (error) {
                console.error('请求失败:', error);
                loader.style.display = 'none';
                errorContainer.style.display = 'block';
                errorContainer.textContent = `加载失败: ${error.message}`;
            }
        }

        // 执行HTML中的脚本
        function executeScripts(container) {
            const scripts = container.querySelectorAll('script');
            scripts.forEach(oldScript => {
                const newScript = document.createElement('script');
                Array.from(oldScript.attributes).forEach(attr => 
                    newScript.setAttribute(attr.name, attr.value)
                );
                newScript.textContent = oldScript.textContent;
                oldScript.parentNode.replaceChild(newScript, oldScript);
            });
        }

        // 页面加载后执行
        document.addEventListener('DOMContentLoaded', loadRemoteHtml);
    </script>
</body>
</html>
    
